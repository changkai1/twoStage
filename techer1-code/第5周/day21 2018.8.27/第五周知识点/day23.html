<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305825 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="1802"/>

<div>
<span><div> </div><div><span style="font-size: 14pt;">2、ajax</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">什么是ajax : 异步的JavaScript and  xml   在向服务器提交少量的数据时，可以使用ajax实现  提高程序的执行效率</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">作用 ： 实现整个页面无刷新（局部刷新）   ajax最大特点--<span style="background-color: rgb(251, 250, 248); font-size: 14pt; color: rgb(255, 0, 0);">页面无刷新</span></span></div></div><div><br/></div><div><span style="font-size: 14pt;">3、ajax工作原理</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248);"><img src="day23_files/Image.png" type="image/png" data-filename="" style="font-family: Monaco; color: rgb(51, 51, 51);" width="832"/></span></div></div><div><span style="font-size: 14pt;">4、异步和同步</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">异步 ： 同时执行 （生活中的同步）      发短信    统筹</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">异步---非阻塞模式  前面的代码不会影响后面代码的执行</span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">同步 ：顺序执行</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">同步---阻塞模式  前面的代码会影响后面代码执行  </span></div></div><div><br/></div><div><span style="font-size: 14pt;">5、ajax获取或向服务器发送数据步骤</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">打电话 ： </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    1、需要一个手机</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    2、拨号  （建立和信号源连接）</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    3、打电话方说</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    4、对方回应</span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">ajax步骤：</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    1、需要一个ajax对象  XMLHttpRequest </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">          var ajax = null;</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        if( window.XMLHttpRequest ){</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">            ajax = new XMLHttpRequest();</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        }else{</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">            ajax = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        }</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    2、建立和服务器的连接</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        通过 open() 方法</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        三个参数</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        第一个参数 ： 请求数据的方式  get/post</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        get和post区别 : </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        get   路径传值  数据量小   </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        post  非路径传值  数据量大</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        第二个参数 ： 路径  url </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        第三个参数 ： 异步true / 同步false   默认是异步  (可以省略) </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    3、发送数据</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        通过 send()方法 发送数据</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">    4、服务器处理数据 并将处理结果返回来</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        服务器处理的结果 在 responseText 属性中</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        通过 onreadystatechange 事件 相应服务器处理的结果</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        事件中 注意 ： 状态值 和  状态码判断</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">        状态值 ：  0  1  2  3  4</span></div><div><span style="font-size: 14pt; background-color: rgb(251, 250, 248);">        ajax</span><span style="font-size: 14pt; background-color: rgb(251, 250, 248); font-family: 宋体;">状态值说明：</span></div><div style="margin-left: 21pt; text-align: left; text-indent: 20pt; margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 20pt; background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;"> 0</span> <span style="text-indent: 20pt; background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">：请求未初始化（还没有调用</span><span style="text-indent: 20pt; background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">open</span><span style="text-indent: 20pt; background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">）</span></div><div style="text-align: left; margin-top: 1em; margin-bottom: 1em;"><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">         1</span> <span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">：请求已经建立，但是还没有发送（还没有调用</span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">send()</span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">）</span></div><div style="text-align: left; margin-top: 1em; margin-bottom: 1em;"><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">         2 :</span> <span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">请求已发送，正在处理中</span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;"> </span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;"> </span></div><div style="text-align: left; margin-top: 1em; margin-bottom: 1em;"><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">         3 :</span> <span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">请求在处理中，通常响应中已有部分数据可以用了，但是服务器还没有完成响应的生成</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">       </span> <span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;"> 4</span> <span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">：响应已完成 您可以获取并使用服务器的响应了</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">        ajax状态码 ： </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: 宋体;">            </span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">200——</span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">交易成功</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">            </span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">404——</span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">没有发现文件、查询或</span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">URl</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">            </span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">500——</span><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">服务器产生内部错误</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: red; font-family: 宋体;">            </span><span style="box-sizing: border-box; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); font-size: 12pt; color: red; font-family: 宋体;">400——</span><span style="box-sizing: border-box; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); font-size: 12pt; color: red; font-family: 宋体;">错误请求，如语法错误</span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt;">            </span></div></div><div><br/></div><div><span style="font-size: 14pt;">6、缓存</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">当多次通过ajax方式请求服务器的数据时，如果请求的路径没有发生变化，后面的请求 会从浏览器的缓存上提数据  </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">如果服务器的数据有更改    客户端不能及时获取浏览器的数据</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">为了防止缓存现象 ： </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">解决方式 ：在请求路径上添加一个一个参数  值是一个随机值</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 14pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">&quot;t&quot;+(i+1)+&quot;.txt?id=&quot;+new Date().getTime()    或  Math.random()</span></div></div><div><br/></div><div><span style="font-size: 14pt;">7、字符和对象转换</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">通过ajax从服务器获取的数据都是字符串</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">将字符串转对象 '{&quot;name&quot;:&quot;lichune&quot;}'  '[{&quot;name&quot;:&quot;aaa&quot;},{}]'    JSON.parse(  )     </span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">将对象转成字符串  JSON.stringify()</span></div><div><br/></div></div><div><span style="font-size: 14pt;">8、接口</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 12px;"><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">接口 就是 后端程序为前端提供一个 路径   </span></div><div style="font-size: 12px;"><span style="background-color: rgb(251, 250, 248); font-size: 12pt; color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">接口路径 ：  xxx.php    xxx.jsp    xxx.asp  含义 ： 验证用户名的唯一性  </span></div><div style="font-size: 12px;"><span style="font-size: 14px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 23px;">接口参数 :  用户名  username </span></div><div style="font-size: 12px;"><span style="box-sizing: border-box; font-size: 12pt; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><a href="http://127.0.0.1/ajax1806/xxx.php" style="background-color: rgb(251, 250, 248); font-size: 12pt; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;">http://127.0.0.1/ajax1806/checkNameDB.php</a>?</span></div><div style="font-size: 12px;"><span style="background-color: rgb(251, 250, 248); font-size: 12px;">接口参数 ： username  用户名  </span></div><div style="font-size: 12px;"><span style="font-size: 14px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 23px;">接口的返回值 :  </span></div><div style="font-size: 12px;"><span style="font-size: 14px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 23px;">           0   用户名不存在</span></div><div style="font-size: 12px;"><span style="font-size: 14px; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 23px;">           1   用户名存在</span></div><div><span style="background-color: rgb(251, 250, 248); font-size: 12pt;">接口功能  </span></div></div><div><br/></div><div>9、ajax向服务器提交或获取数据的方式</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12pt;">get   路径传值   传递的数据量小  速度快</span></div><div><span style="background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12pt;">post  非路径传值  传递的数据量大  </span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 