<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    用户名：<input type="text" id="t">
            <input type="button" id="btn" value="按钮">
</body>
</html>
<script src="../public.js"></script>
<script>
    /*
      1.对用户名格式验证
        要求： 1.长度在6--20之间
              2.不能用数字开头
              3.只能包含数字、字母、下划线
    */ 
    var oBtn = $id("btn");
    var oTxt = $id("t");
    oBtn.onclick = function(){
        var str = oTxt.value;
        if(str.length < 6 || str.length > 20 ){
            alert("长度必须在6--20之间");
            return;
        }
        // 取出第一个字符
        if(str.charAt(0) >= "0" && str.charAt(0) <= "9"){
            alert("不能已数字开头");
            return;
        }
        // 转小写字母
        str = str.toLowerCase();
        var count = 0;  //统计数字、字母、下划线的个数
        for(var i = 0; i < str.length; i++){
            var ch = str.charAt(i);
            if( ( ch >= "0" && ch <= "9" ) || ( ch >= "a" && ch <= "z" ) || (ch == "_") ){
                count++;
            }
        }
        if( count == str.length ){ //说明没有特殊字符
            alert("合法");
        }else{
            alert("请输入数字、字母或下划线");
        }
    }



</script>