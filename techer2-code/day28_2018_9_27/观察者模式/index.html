<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			/*
			小明最近看上了一套房子，到了售楼处之后才被告知，该楼盘的房子早已售罄。好在售楼MM告诉小明，不久后还有一些尾盘推出，开发商正在办理相关手续，手续办好后便可以购买。但到底是什么时候，目前还没有人能够知道。于是小明记下了售楼处的电话，以后每天都会打电话过去询问是不是已经到了购买时间。除了小明，还有小红、小强、小龙也会每天向售楼处咨询这个问题。一个星期后，售楼MM决定辞职，因为厌倦了每天回答1000个相同内容的电话。当然现实中没有这么笨的销售公司，实际上故事是这样的：小明离开之前，把电话号码留在了售楼处。售楼MM答应他，新楼盘一推出就马上发信息通知小明。小红、小强和小龙也是一样，他们的电话号码都被记在售楼处的花名册上，新楼盘推出的时候，售楼MM会翻开花名册，遍历上面的电话号码，依次发送一条短信来通知他们。——这种发送短信通知就是一个典型的发布-订阅模式（观察者模式）。小明、小红等购买者都是订阅者，他们订阅了房子开售的消息。售楼处作为发布者，会在合适的时候遍历花名册上的电话号码，依次给购房者发布消息。
			*/
		   //售楼处
		   var salesOffice = {};
		   //登记簿
		   salesOffice.arr = [];
		   //售楼MM
		   salesOffice.mm = function(fn){
			   salesOffice.arr.push(fn);
			   console.log(salesOffice.arr);
		   }
		   //发布信息
		   salesOffice.send = function(a,b){
			  // console.log(arguments);
			   for(var i = 0,fn,list = this.arr;fn = list[i ++];){
				  // fn.apply(this,arguments);
				  fn(a,b);
			   }
		   }
		   
		   salesOffice.mm(function(square,money){
			   console.log("平方：" + square + "\n价格：" + money);
		   })
		   salesOffice.mm(function(square,money){
		   	console.log("平方：" + square + "\n价格：" + money);
		   })
		   salesOffice.mm(function(square,money){
		   	console.log("平方：" + square + "\n价格：" + money);
		   })
		   salesOffice.mm(function(square,money){
		   	console.log("平方：" + square + "\n价格：" + money);
		   })
		   salesOffice.mm(function(square,money){
		   	console.log("平方：" + square + "\n价格：" + money);
		   })
		   salesOffice.mm(function(square,money){
		   	console.log("平方：" + square + "\n价格：" + money);
		   })
		   salesOffice.mm(function(square,money){
		   	console.log("平方：" + square + "\n价格：" + money);
		   })
		   
		   salesOffice.send("80","1000000");
		</script>
	</body>
</html>